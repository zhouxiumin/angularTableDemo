<!-- Main page -->
<div class="content">
    <h1>Application Logs</h1>

    <div class="table-content">
        <!-- Table actions -->
        <div class="table-actions">
            <button type="button" class="btn btn-default" ng-click="retrieveData()">
                <span class="glyphicon glyphicon-refresh"></span>
                <span>Retrieve</span>
            </button>
        </div>
        <!-- Data table -->
        <div class="col-md-12">
            <table class="table table-striped">
                <tr>
                    <th class="text-center col-sm-1" ng-include="'views/partials/header-user-name.html'"></th>
                    <th class="text-center" ng-include="'views/partials/header-error-level.html'"></th>
                    <th class="text-center col-sm-2" ng-include="'views/partials/header-date.html'"></th>
                    <th class="text-center" ng-include="'views/partials/header-process-run-ref.html'"></th>
                    <th class="text-center" ng-include="'views/partials/header-process-name.html'"></th>
                    <th class="text-center" ng-include="'views/partials/header-message.html'"></th>
                </tr>
                <tr ng-class="{ERROR:'log-error', WARN:'log-warning'}[entry.logLevel]"
                    ng-repeat="entry in filteredLogEntries |
                    filter: {userName: userNameFilter,
                            logLevel: errorLevelFilter,
                            processRunRef: processRunRefFilter,
                            processName: processNameFilter,
                            message: messageFilter} |
                    filter : dateRange:dateFilterStart:dateFilterEnd |
                    filter: paginate |
                    orderBy:sorting.column:sorting.descending">

                    <td class="text-center">{{entry.userName}}</td>
                    <td>
                        <error-level-icon></error-level-icon>
                        <span>{{entry.logLevel}}</span>
                    </td>
                    <td class="text-center">{{entry.date}}</td>
                    <td class="text-center">{{entry.processRunRef}}</td>
                    <td class="text-center">{{entry.processName}}</td>
                    <td class="message-content" popover-animation="false" popover="{{entry.message}}" popover-placement="top" popover-trigger="click">{{entry.message | truncateString}}</td>
                </tr>
            </table>
        </div>
        <!-- Pagination widget -->
        <div class="col-md-12 text-center">
            <pagination ng-model="currentPage"
                        total-items="totalItems"
                        max-size="5"
                        boundary-links="true"
                        items-per-page="numPerPage"
                        class="pagination-sm">
            </pagination>
        </div>
    </div>
</div>

